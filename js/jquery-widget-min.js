jQuery(function(){function e(e,t){t?"string"==typeof t?e.html(t):(t instanceof d||f(t))&&e.append(t):t===!1&&e.remove()}function t(t,i){var a=i.css,l=t.find(".wd-ctn"),f=t.find(".wd-tt"),u=t.find(".wd-ft"),p=i.title,r=i.content,h=i.footer;if(t.addClass(a.panel),t.css({"z-index":++o}),e(f,p),e(l,r),e(u,h),f.addClass(a.title),l.addClass(a.content),u.addClass(a.footer),l.css({width:i.width,height:i.height,"min-width":i.width,"min-height":i.height}),i.closeable){var w=d('<button class="wd-close">'+i.closeText+"</button>");w.on("click",function(){t.close()}).addClass(a.close),u.append(w)}i.dragable&&!i.align.fixed&&n(t);var v;i.modal&&(v=d('<div class="wd-ui-modal"></div>'),v.width(c.width()),v.height(c.height()),v.click(function(e){e.stopPropagation()}),v.hide(),s.append(v));var m=t.hide;t.hide=function(){m.call(t),i.modal&&v.hide()};var g=t.show;t.show=function(){g.call(t),t.align(i.align),t.css("min-width",t.width()),i.modal&&v.show().align({base:"screen",fixed:!0})},t.open=function(){t.show(),i.open.call(t)},t.close=function(){t.hide(),i.close.call(t)},t.destroy=function(){t.remove()},t.on("click",function(){t.css("z-index",++o)}),s.append(t),i.autoOpen?t.open():(t.hide(),i.modal&&v.hide())}function n(e){function t(e){e.preventDefault(),e.stopPropagation()}function n(e){var n=d(this),f=n.offset();c.x=e.pageX,c.y=e.pageY,l.x=f.left,l.y=f.top,a.on({mousemove:o,mouseup:i,selectstart:t}),s.addClass("wd-ui-move")}function o(t){var n={x:t.pageX-c.x,y:t.pageY-c.y},o={x:l.x+n.x,y:l.y+n.y};e.align({base:[o.x,o.y],points:["cc","tl"]})}function i(){a.off({mousemove:o,mouseup:i,selectstart:t}),s.removeClass("wd-ui-move")}var s=e.find(".wd-tt"),c={},l={};s.on("mousedown",n)}var o=1e6,i={content:"",title:"",footer:"",modal:!1,css:{panel:"wd-ui-pn",title:"wd-ui-tt",content:"wd-ui-ctn",footer:"wd-ui-ft",close:"wd-ui-close"},dragable:!0,closeable:!0,autoOpen:!0,closeText:"close",align:{base:"screen",points:["cc","cc"],fixed:!1,offset:[0,0]},width:300,height:"auto",close:function(){},open:function(){}},d=jQuery,s=d("body"),c=d(window),a=d(document),l=d('<div class="wd-pn"><div class="wd-tt"></div><div class="wd-ctn"></div><div class="wd-ft"></div></div>'),f="object"==typeof HTMLElement?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName};d.widget=function(e){e=d.extend({},i,e);var n=l.clone();return t(n,e),n}});